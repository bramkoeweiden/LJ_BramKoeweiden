<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Bram Koeweiden" />


<title>Week 1</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>

<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Week1.html">Week 1</a>
    </li>
    <li>
      <a href="Week2.html">Week 2</a>
    </li>
    <li>
      <a href="Week3.html">Week 3</a>
    </li>
    <li>
      <a href="Week4.html">Week 4</a>
    </li>
    <li>
      <a href="Week5.html">Week 5</a>
    </li>
    <li>
      <a href="Week6.html">Week 6</a>
    </li>
    <li>
      <a href="Week6.html">Week 6</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Research paper
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro.html">Introduction</a>
    </li>
    <li>
      <a href="theory.html">Theory</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final research paper
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="final_intro.html">Introduction research paper</a>
    </li>
    <li>
      <a href="final_intro.html">Theory research paper</a>
    </li>
    <li>
      <a href="data_methods.html">Data &amp; Methods</a>
    </li>
    <li>
      <a href="results_desc.html">Descriptive results</a>
    </li>
    <li>
      <a href="results_RSiena.html">RSiena results</a>
    </li>
    <li>
      <a href="conclusion.html">Conclusion</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bramkoeweiden/LJ_BramKoeweiden">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Week 1</h1>
<h4 class="author">Bram Koeweiden</h4>

</div>


<p>Last compiled on November, 2025</p>
<p><br></p>
<hr />
<pre class="r test"><code>rm(list = ls())



fpackage.check &lt;- function(packages) {
    lapply(packages, FUN = function(x) {
        if (!require(x, character.only = TRUE)) {
            install.packages(x, dependencies = TRUE)
            library(x, character.only = TRUE)
        }
    })
}

fsave &lt;- function(x, file = NULL, location = &quot;./data/processed/&quot;) {
    ifelse(!dir.exists(&quot;data&quot;), dir.create(&quot;data&quot;), FALSE)
    ifelse(!dir.exists(&quot;data/processed&quot;), dir.create(&quot;data/processed&quot;), FALSE)
    if (is.null(file))
        file = deparse(substitute(x))
    datename &lt;- substr(gsub(&quot;[:-]&quot;, &quot;&quot;, Sys.time()), 1, 8)
    totalname &lt;- paste(location, datename, file, &quot;.rda&quot;, sep = &quot;&quot;)
    save(x, file = totalname)  #need to fix if file is reloaded as input name, not as x. 
}

fload &lt;- function(filename) {
    load(filename)
    get(ls()[ls() != &quot;filename&quot;])
}

fshowdf &lt;- function(x, ...) {
    knitr::kable(x, digits = 2, &quot;html&quot;, ...) %&gt;%
        kableExtra::kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
        kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)
}

colorize &lt;- function(x, color) {
    sprintf(&quot;&lt;span style=&#39;color: %s;&#39;&gt;%s&lt;/span&gt;&quot;, color, x)
}

packages = c(&quot;RSiena&quot;, &quot;devtools&quot;, &quot;igraph&quot;)
fpackage.check(packages)</code></pre>
<pre class="test2"><code>#&gt; [[1]]
#&gt; NULL
#&gt; 
#&gt; [[2]]
#&gt; NULL
#&gt; 
#&gt; [[3]]
#&gt; NULL</code></pre>
<pre class="r test"><code># devtools::install_github(&#39;JochemTolsma/RsienaTwoStep&#39;, build_vignettes=TRUE)
packages = c(&quot;RsienaTwoStep&quot;)
fpackage.check(packages)</code></pre>
<pre class="test2"><code>#&gt; [[1]]
#&gt; NULL</code></pre>
<pre class="r test"><code>library(tidyverse)</code></pre>
<pre class="r test"><code>scholars &lt;- fload(&quot;./data/processed/scholars_20240924.rda&quot;)</code></pre>
<pre class="r test"><code>fcolnet &lt;- function(data = scholars, university = c(&quot;RU&quot;, &quot;EUR&quot;, &quot;WUR&quot;, &quot;UvA&quot;, &quot;Leiden&quot;, &quot;VU&quot;, &quot;UU&quot;,
    &quot;UvT&quot;), discipline = c(&quot;sociology&quot;, &quot;political science&quot;), waves = list(c(2015, 2018), c(2019, 2023)),
    type = c(&quot;first&quot;)) {

    # step 1
    demographics &lt;- do.call(rbind.data.frame, data$demographics)
    demographics &lt;- demographics %&gt;%
        mutate(Universiteit1.22 = replace(Universiteit1.22, is.na(Universiteit1.22), &quot;&quot;), Universiteit2.22 = replace(Universiteit2.22,
            is.na(Universiteit2.22), &quot;&quot;), Universiteit1.24 = replace(Universiteit1.24, is.na(Universiteit1.24),
            &quot;&quot;), Universiteit2.24 = replace(Universiteit2.24, is.na(Universiteit2.24), &quot;&quot;), discipline.22 = replace(discipline.22,
            is.na(discipline.22), &quot;&quot;), discipline.24 = replace(discipline.24, is.na(discipline.24), &quot;&quot;))

    sample &lt;- which((demographics$Universiteit1.22 %in% university | demographics$Universiteit2.22 %in%
        university | demographics$Universiteit1.24 %in% university | demographics$Universiteit2.24 %in%
        university) &amp; (demographics$discipline.22 %in% discipline | demographics$discipline.24 %in% discipline))

    demographics_soc &lt;- demographics[sample, ]
    scholars_sel &lt;- lapply(scholars, &quot;[&quot;, sample)

    # step 2
    ids &lt;- demographics_soc$au_id
    nwaves &lt;- length(waves)
    nets &lt;- array(0, dim = c(nwaves, length(ids), length(ids)), dimnames = list(wave = 1:nwaves, ids,
        ids))
    dimnames(nets)

    # step 3
    df_works &lt;- tibble(works_id = unlist(lapply(scholars_sel$work, function(l) l$id)), works_author = unlist(lapply(scholars_sel$work,
        function(l) l$author), recursive = FALSE), works_year = unlist(lapply(scholars_sel$work, function(l) l$publication_year),
        recursive = FALSE))

    df_works &lt;- df_works[!duplicated(df_works), ]

    # step 4
    if (type == &quot;first&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- df_works_w$works_author[i][[1]]$au_id[1]
                alters &lt;- df_works_w$works_author[i][[1]]$au_id[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;last&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[1]
                alters &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;all&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                egos &lt;- df_works_w$works_author[i][[1]]$au_id
                if (sum(ids %in% egos) &gt; 0) {
                  nets[j, which(ids %in% egos), which(ids %in% egos)] &lt;- 1
                }
            }
        }
    }
    output &lt;- list()
    output$data &lt;- scholars_sel
    output$nets &lt;- nets
    return(output)
}</code></pre>
<pre class="r test"><code>test &lt;- fcolnet(data = scholars, 
                university = c(&quot;RU&quot;, &quot;EUR&quot;, &quot;WUR&quot;, &quot;UvA&quot;, &quot;Leiden&quot;, &quot;VU&quot;, &quot;UU&quot;, &quot;UvT&quot;), 
                discipline = c(&quot;sociology&quot;, &quot;political science&quot;), 
                waves = list(c(2015, 2018), c(2019, 2023)), 
                type = c(&quot;all&quot;))

test_w2 &lt;- igraph::graph_from_adjacency_matrix(
  test$nets[2,,], #now, I take the second wave
  mode = c(&quot;directed&quot;),
  weighted = NULL,
  diag = FALSE,
  add.colnames = NULL
)

#Let us find ego characteristics. 
#first fish out the data
df &lt;- test$data

#same complicated structure as &#39;scholars&#39; thus first make a dataframe from the list in which all info was saved. 
df_ego &lt;- do.call(rbind.data.frame, df$demographics)

#DO NOT MESS UP THE ORDER! THUS IF YOU JOIN THIS DATA WITH YOUR OWN DATA CHECK THAT ORDER REMAINED THE SAME!! 

#Adding gender

df_gender &lt;- fload(&quot;./data/processed/df_gender.rda&quot;)


gender &lt;- df_gender[, c(&quot;name&quot;, &quot;gender&quot;)]

gender &lt;- gender %&gt;%
rename(Naam = name)


df_ego &lt;- left_join(df_ego, gender, by=&quot;Naam&quot;)

comp &lt;- igraph::components(test_w2)
g_con &lt;- induced_subgraph(test_w2, which(comp$membership == which.max(comp$csize)))
l &lt;- layout_with_dh(g_con)

plot(g_con,
  vertex.color = ifelse(df_ego$Universiteit1.24 == &quot;RU&quot;, &quot;red&quot;, 
                 ifelse(df_ego$Universiteit1.24 == &quot;WUR&quot;, &quot;green&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UU&quot;, &quot;yellow&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UvA&quot;, &quot;black&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;Leiden&quot;, &quot;blue&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;VU&quot;, &quot;purple&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UvT&quot;, &quot;lightblue&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;EUR&quot;, &quot;lemonchiffon&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;RUG&quot;, &quot;coral&quot;, &quot;white&quot;))))))))),
  vertex.label = NA,
  edge.width = 0.2,
  edge.arrow.size =0.2, layout = l)</code></pre>
<p><img src="Week6_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r test"><code>l &lt;- layout_with_dh(test_w2)

plot(test_w2,
  vertex.color = ifelse(df_ego$Universiteit1.24 == &quot;RU&quot;, &quot;red&quot;, 
                 ifelse(df_ego$Universiteit1.24 == &quot;WUR&quot;, &quot;green&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UU&quot;, &quot;yellow&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UvA&quot;, &quot;black&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;Leiden&quot;, &quot;blue&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;VU&quot;, &quot;purple&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;UvT&quot;, &quot;lightblue&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;EUR&quot;, &quot;lemonchiffon&quot;,
                 ifelse(df_ego$Universiteit1.24 == &quot;RUG&quot;, &quot;coral&quot;, &quot;white&quot;))))))))),
  vertex.label = NA,
  edge.width = 0.2,
  edge.arrow.size =0.2, layout = l)</code></pre>
<p><img src="Week6_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<pre class="r test"><code>wave1 &lt;- test$nets[1, , ]
wave2 &lt;- test$nets[2, , ]

sum(is.na(wave2))</code></pre>
<pre class="test2"><code>#&gt; [1] 0</code></pre>
<pre class="r test"><code>sum(diag(wave2) == 0)</code></pre>
<pre class="test2"><code>#&gt; [1] 25</code></pre>
<pre class="r test"><code>diag(wave2) &lt;- 0
diag(wave1) &lt;- 0

sum(diag(wave2) == 0)</code></pre>
<pre class="test2"><code>#&gt; [1] 605</code></pre>
<pre class="r test"><code>sum(diag(wave1) == 0)</code></pre>
<pre class="test2"><code>#&gt; [1] 605</code></pre>
<pre class="r test"><code>sum(wave2 &gt; 1)</code></pre>
<pre class="test2"><code>#&gt; [1] 0</code></pre>
<pre class="r test"><code>sum(wave2 &gt; 0)</code></pre>
<pre class="test2"><code>#&gt; [1] 1166</code></pre>
<pre class="r test"><code># puts nets in an array
net_soc_array &lt;- array(data = c(wave1, wave2), dim = c(dim(wave1), 2))

# dependebnt
net &lt;- sienaDependent(net_soc_array)

df &lt;- test$data

df_ego &lt;- do.call(rbind.data.frame, df$demographics)

unique(c(df_ego$functie.22, df_ego$Functie.24))</code></pre>
<pre class="test2"><code>#&gt;  [1] &quot;PhD Student&quot;                                                                                  
#&gt;  [2] &quot;Bijzonder hoogleraar&quot;                                                                         
#&gt;  [3] &quot;Onderzoeker&quot;                                                                                  
#&gt;  [4] &quot;Hoogleraar&quot;                                                                                   
#&gt;  [5] &quot;Docent&quot;                                                                                       
#&gt;  [6] &quot;Universitair hoofddocent&quot;                                                                     
#&gt;  [7] &quot;Universitair docent&quot;                                                                          
#&gt;  [8] &quot;Promovendus&quot;                                                                                  
#&gt;  [9] &quot;Hoogleraar + Universitair hoofddocent&quot;                                                        
#&gt; [10] &quot;Emeritus hoogleraar&quot;                                                                          
#&gt; [11] NA                                                                                             
#&gt; [12] &quot;Associate researcher&quot;                                                                         
#&gt; [13] &quot;Postdoc&quot;                                                                                      
#&gt; [14] &quot;Senior Researcher&quot;                                                                            
#&gt; [15] &quot;External Phd&quot;                                                                                 
#&gt; [16] &quot;Guest Researcher&quot;                                                                             
#&gt; [17] &quot;Other researcher&quot;                                                                             
#&gt; [18] &quot;Senior researcher&quot;                                                                            
#&gt; [19] &quot;Hoofdonderzoeker&quot;                                                                             
#&gt; [20] &quot;Lecturer&quot;                                                                                     
#&gt; [21] &quot;Docent?&quot;                                                                                      
#&gt; [22] &quot;Onderzoeker/Lecturer&quot;                                                                         
#&gt; [23] &quot;Gepensioneerd docent sociologie&quot;                                                              
#&gt; [24] &quot;Lecturer and Researcher&quot;                                                                      
#&gt; [25] &quot;Lecturer/researcher&quot;                                                                          
#&gt; [26] &quot;Phd &amp; postdoc&quot;                                                                                
#&gt; [27] &quot;Bijzonder Hoogleraar&quot;                                                                         
#&gt; [28] &quot;Senior lecturer&quot;                                                                              
#&gt; [29] &quot;Unversitair docent GPM&quot;                                                                       
#&gt; [30] &quot;PhD Student anthropologie&quot;                                                                    
#&gt; [31] &quot;Docent, phd&quot;                                                                                  
#&gt; [32] &quot;Directeur SoG&quot;                                                                                
#&gt; [33] &quot;Scholarship student&quot;                                                                          
#&gt; [34] &quot;Honorary professor&quot;                                                                           
#&gt; [35] &quot;Medewerker&quot;                                                                                   
#&gt; [36] &quot;PhD student&quot;                                                                                  
#&gt; [37] &quot;Junior onderzoeker&quot;                                                                           
#&gt; [38] &quot;Gastonderzoeker&quot;                                                                              
#&gt; [39] &quot;Fellow&quot;                                                                                       
#&gt; [40] &quot;Hoogleraar/Afdelingsvoorzitter&quot;                                                               
#&gt; [41] &quot;Universitair hoofddocent/Onderwijsdirecteur&quot;                                                  
#&gt; [42] &quot;Docent/PhD student&quot;                                                                           
#&gt; [43] &quot;PhD student/Gast&quot;                                                                             
#&gt; [44] &quot;Gast/Emeritus universitair hoofddocent&quot;                                                       
#&gt; [45] &quot;Emeritus hoogleraar (gast?)&quot;                                                                  
#&gt; [46] &quot;Hoogleraar (gast)&quot;                                                                            
#&gt; [47] &quot;Docent (gepensioneerd)&quot;                                                                       
#&gt; [48] &quot;Doctoral student&quot;                                                                             
#&gt; [49] &quot;Does project at UvA, has worked as professor, lecturer, and research fellow at different unis&quot;
#&gt; [50] &quot;Senior Research Fellow&quot;                                                                       
#&gt; [51] &quot;Gepensioneerd UHD&quot;                                                                            
#&gt; [52] &quot;?&quot;                                                                                            
#&gt; [53] &quot;Senior researcher part-time&quot;                                                                  
#&gt; [54] &quot;part-time doctoral researcher&quot;                                                                
#&gt; [55] &quot;PhD studentt&quot;                                                                                 
#&gt; [56] &quot;Doctoral Researcher&quot;                                                                          
#&gt; [57] &quot;Onderzoeksfellow&quot;                                                                             
#&gt; [58] &quot;Onderzoeksmedewerker&quot;                                                                         
#&gt; [59] &quot;Junior docent&quot;                                                                                
#&gt; [60] &quot;PhD student, Junior Docent&quot;                                                                   
#&gt; [61] &quot;Hoogleraar (visiting)&quot;                                                                        
#&gt; [62] &quot;External PhD&quot;                                                                                 
#&gt; [63] &quot;Universitair Docent&quot;                                                                          
#&gt; [64] &quot;Onderwijsontwikkelaar&quot;                                                                        
#&gt; [65] &quot;Phd Student&quot;                                                                                  
#&gt; [66] &quot;Wetenschappelijk directeur&quot;                                                                   
#&gt; [67] &quot;Gast/ Onderzoeker&quot;                                                                            
#&gt; [68] &quot;Research fellow&quot;</code></pre>
<pre class="r test"><code>df_ego$Functie.22[is.na(df_ego$Functie.22)] &lt;- &quot;&quot;
df_ego$Functie.24[is.na(df_ego$Functie.24)] &lt;- &quot;&quot;


df_ego$functie &lt;- ifelse(df_ego$Functie.22 == &quot;Hoogleraar&quot;, 1, 0)
df_ego$functie &lt;- ifelse(df_ego$Functie.24 == &quot;Hoogleraar&quot;, 1, 0)
df_ego$functie &lt;- ifelse(df_ego$Functie.22 == &quot;Bijzonder hoogleraar&quot;, 1, df_ego$functie)
df_ego$functie &lt;- ifelse(df_ego$Functie.24 == &quot;Bijzonder hoogleraar&quot;, 1, df_ego$functie)

df &lt;- test$data


table(df_ego$functie, useNA = &quot;always&quot;)</code></pre>
<pre class="test2"><code>#&gt; 
#&gt;    0    1 &lt;NA&gt; 
#&gt;  516   89    0</code></pre>
<pre class="r test"><code>functie &lt;- coCovar(df_ego$functie)

df_ego$uni_22_num &lt;- as.numeric(factor(df_ego$Universiteit1.22, levels = c(&quot;RU&quot;, &quot;EUR&quot;, &quot;WUR&quot;, &quot;UvA&quot;,
    &quot;Leiden&quot;, &quot;VU&quot;, &quot;UU&quot;, &quot;UvT&quot;)))

df_ego$uni_24_num &lt;- as.numeric(factor(df_ego$Universiteit1.24, levels = c(&quot;RU&quot;, &quot;EUR&quot;, &quot;WUR&quot;, &quot;UvA&quot;,
    &quot;Leiden&quot;, &quot;VU&quot;, &quot;UU&quot;, &quot;UvT&quot;)))
df_ego$uni_22_num == df_ego$uni_24_num</code></pre>
<pre class="test2"><code>#&gt;   [1]    NA FALSE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE    NA  TRUE
#&gt;  [16]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE    NA  TRUE  TRUE    NA  TRUE  TRUE
#&gt;  [31]  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE
#&gt;  [46]  TRUE    NA  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE
#&gt;  [61]    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE
#&gt;  [76]  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE    NA    NA  TRUE  TRUE    NA
#&gt;  [91]    NA    NA    NA    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [106]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE    NA
#&gt; [121]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [136]  TRUE  TRUE FALSE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE
#&gt; [151]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE
#&gt; [166]  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [196]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [211]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [226]  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [241]  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [256]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE
#&gt; [271]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [286]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [301]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE
#&gt; [316]    NA  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [331]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [346]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [361]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [376]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE    NA FALSE  TRUE    NA  TRUE
#&gt; [391]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA    NA  TRUE  TRUE  TRUE  TRUE  TRUE    NA
#&gt; [406]  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [421]  TRUE  TRUE  TRUE  TRUE    NA    NA    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [436]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [451]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [466]  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [481]  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [496]  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
#&gt; [511]  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
#&gt; [526]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
#&gt; [541]  TRUE    NA  TRUE  TRUE    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
#&gt; [556]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
#&gt; [571]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
#&gt; [586]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
#&gt; [601]    NA    NA    NA    NA    NA</code></pre>
<pre class="r test"><code>table(df_ego$uni_24_num, useNA = &quot;always&quot;)</code></pre>
<pre class="test2"><code>#&gt; 
#&gt;    1    2    4    5    6    7    8 &lt;NA&gt; 
#&gt;   87   50  163   68  117   44   26   50</code></pre>
<pre class="r test"><code>uni_24 &lt;- coCovar(df_ego$uni_24_num)

mydata &lt;- sienaDataCreate(net, functie, uni_24)</code></pre>
<pre class="r test"><code># Werkt nog niet zonder gender van jaar ervoor

df_ego &lt;- do.call(rbind.data.frame, df$demographics)

# DO NOT MESS UP THE ORDER! THUS IF YOU JOIN THIS DATA WITH YOUR OWN DATA CHECK THAT ORDER REMAINED
# THE SAME!!

# Adding gender

df_gender &lt;- fload(&quot;./data/processed/df_gender.rda&quot;)


gender &lt;- df_gender[, c(&quot;name&quot;, &quot;gender&quot;)]

gender &lt;- gender %&gt;%
    rename(Naam = name)


df_ego &lt;- left_join(df_ego, gender, by = &quot;Naam&quot;)


df_ego$gender &lt;- ifelse(df_ego$gender == &quot;female&quot;, 1, 0)
# Female = 1, male = 0

df_ego$gender
# gender
table(df_ego$gender, useNA = &quot;always&quot;)
# v_gender &lt;- coCovar(df_ego$gender)

v_gender &lt;- coCovar(df_ego$gender, nodeSet = attr(net, &quot;nodeSet&quot;))

str(v_gender)
str(net)

attr(net, &quot;nodeSet&quot;)
attr(v_gender, &quot;nodeSet&quot;)
length(df_ego$gender)
dim(net)

str(net)
attributes(net)</code></pre>
<div id="step-2" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Step 2</h1>
<pre class="r test"><code>myeff &lt;- getEffects(mydata)

myeff</code></pre>
<pre class="test2"><code>#&gt;   effectName               include fix   test  initialValue parm
#&gt; 1 basic rate parameter net TRUE    FALSE FALSE    4.41786   0   
#&gt; 2 degree (density)         TRUE    FALSE FALSE   -1.70742   0</code></pre>
</div>
<div id="step-3" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Step 3:</h1>
<pre class="r test"><code>if (!dir.exists(&quot;results&quot;)) dir.create(&quot;results&quot;)

print01Report(mydata, modelname = &quot;./results/r_w6&quot;)</code></pre>
</div>
<div id="step-4" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Step 4</h1>
<pre class="r test"><code>set.seed(42)


# myAlgorithm &lt;- sienaAlgorithmCreate(projname = &#39;r_w6&#39;) ansM1 &lt;- siena07(myAlgorithm, data =
# mydata, effects = myeff, returnDeps = TRUE) if necessary estimate again!  ansM1 &lt;-
# siena07(myAlgorithm, data = mydata, effects = myeff, prevAns = ansM1, returnDeps=TRUE)
ansM1

myeff &lt;- getEffects(mydata)

# myeff &lt;- includeEffects(myeff, isolateNet, inPop, outAct) #we know that quite a lot of staff has
# not published with someone else
myeff &lt;- includeEffects(myeff, inPop, outAct, egoX)


myeff &lt;- setEffect(myeff, sameX, interaction1 = &quot;uni_24&quot;)
myeff &lt;- setEffect(myeff, egoX, interaction1 = &quot;functie&quot;)



myAlgorithm &lt;- sienaAlgorithmCreate(projname = &quot;soc_init&quot;, n3 = 200)
ansM1 &lt;- siena07(myAlgorithm, data = mydata, effects = myeff, returnDeps = TRUE)
# if necessary estimate again!  ansM1 &lt;- siena07(myAlgorithm, data = mydata, effects = myeff,
# prevAns = ansM1, returnDeps=TRUE)
ansM1



parallel::detectCores()</code></pre>
<pre class="r test"><code>library(RSiena)

`?`(sienaDependent)

mynet1 &lt;- sienaDependent(array(c(s501, s502, s503), dim = c(50, 50, 3)))
mybeh &lt;- sienaDependent(s50a, type = &quot;behavior&quot;)


smoke &lt;- s50s

smoke &lt;- varCovar(s50s)

mydata &lt;- sienaDataCreate(mynet1, mybeh, smoke)

print01Report(mydata)

mydata

myeff &lt;- getEffects(mydata)

myeff &lt;- includeEffects(myeff, unequalX, name = &quot;mynet1&quot;, interaction1 = &quot;smoke&quot;)

myeff &lt;- includeEffects(myeff, unequalX, name = &quot;mynet1&quot;, interaction1 = &quot;mybeh&quot;)

myAlgorithm &lt;- sienaAlgorithmCreate()
ansM1 &lt;- siena07(myAlgorithm, data = mydata, effects = myeff, prevAns = ansM1)
ansM1</code></pre>
<hr />
</div>
<div id="notes" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Notes</h1>
<p><span class="citation">(Bozeman and Gaughan 2011)</span></p>
<p><span class="citation">(Kretschmer, Leszczensky, and Pink
2018)</span></p>
<p>Bridging ties across clusters is useful for knowledge production. It
follows that those who bridge the gaps by collaborating with scholars
from different universities would be beneficial. There are reasons to
expect gender differences in this regard <span class="citation">Bozeman
and Gaughan (2011)</span>. Thus research questions:</p>
<p>1: Is a higher amount of interuniversity ties linked to a higher
betweennes centrality?</p>
<p>2: Do men more often choose to collaborate with scholars outside of
their university than women?</p>
<div id="refs" class="references csl-bib-body hanging-indent"
entry-spacing="0">
<div id="ref-bozeman2011" class="csl-entry">
Bozeman, Barry, and Monica Gaughan. 2011. <span>“How Do Men and Women
Differ in Research Collaborations? An Analysis of the Collaborative
Motives and Strategies of Academic Researchers.”</span> <em>Research
Policy</em> 40 (10): 1393–1402. <a
href="https://doi.org/10.1016/j.respol.2011.07.002">https://doi.org/10.1016/j.respol.2011.07.002</a>.
</div>
<div id="ref-kretschmer2018" class="csl-entry">
Kretschmer, David, Lars Leszczensky, and Sebastian Pink. 2018.
<span>“Selection and Influence Processes in Academic
Achievement<span></span>more Pronounced for Girls?”</span> <em>Social
Networks</em> 52 (January): 251–60. <a
href="https://doi.org/10.1016/j.socnet.2017.09.003">https://doi.org/10.1016/j.socnet.2017.09.003</a>.
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiV2VlayAxIgojYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYgphdXRob3I6ICJCcmFtIEtvZXdlaWRlbiIKYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYgotLS0KCmBgYHtyLCBnbG9iYWxzZXR0aW5ncywgZWNobz1GQUxTRSwgd2FybmluZz1GQUxTRSwgcmVzdWx0cz0naGlkZSd9CmxpYnJhcnkoa25pdHIpCgprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpCm9wdHNfY2h1bmskc2V0KHRpZHkub3B0cz1saXN0KHdpZHRoLmN1dG9mZj0xMDApLHRpZHk9VFJVRSwgd2FybmluZyA9IEZBTFNFLCBtZXNzYWdlID0gRkFMU0UsY29tbWVudCA9ICIjPiIsIGNhY2hlPVRSVUUsIGNsYXNzLnNvdXJjZT1jKCJ0ZXN0IiksIGNsYXNzLm91dHB1dD1jKCJ0ZXN0MiIpKQpvcHRpb25zKHdpZHRoID0gMTAwKQojcmdsOjpzZXR1cEtuaXRyKCkKCgoKY29sb3JpemUgPC0gZnVuY3Rpb24oeCwgY29sb3IpIHtzcHJpbnRmKCI8c3BhbiBzdHlsZT0nY29sb3I6ICVzOyc+JXM8L3NwYW4+IiwgY29sb3IsIHgpIH0KCmBgYAoKYGBge3Iga2xpcHB5LCBlY2hvPUZBTFNFLCBldmFsPUZBTFNFLCBpbmNsdWRlPVRSVUV9CmtsaXBweTo6a2xpcHB5KHBvc2l0aW9uID0gYygndG9wJywgJ3JpZ2h0JykpCmtsaXBweTo6a2xpcHB5KGNvbG9yID0gJ2RhcmtyZWQnKQprbGlwcHk6OmtsaXBweSh0b29sdGlwX21lc3NhZ2UgPSAnQ2xpY2sgdG8gY29weScsIHRvb2x0aXBfc3VjY2VzcyA9ICdEb25lJykKYGBgCgpMYXN0IGNvbXBpbGVkIG9uIGByIGZvcm1hdChTeXMudGltZSgpLCAnJUIsICVZJylgCgo8YnI+CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmBgYHtyfQpybShsaXN0ID0gbHMoKSkKCgoKZnBhY2thZ2UuY2hlY2sgPC0gZnVuY3Rpb24ocGFja2FnZXMpIHsKICAgIGxhcHBseShwYWNrYWdlcywgRlVOID0gZnVuY3Rpb24oeCkgewogICAgICAgIGlmICghcmVxdWlyZSh4LCBjaGFyYWN0ZXIub25seSA9IFRSVUUpKSB7CiAgICAgICAgICAgIGluc3RhbGwucGFja2FnZXMoeCwgZGVwZW5kZW5jaWVzID0gVFJVRSkKICAgICAgICAgICAgbGlicmFyeSh4LCBjaGFyYWN0ZXIub25seSA9IFRSVUUpCiAgICAgICAgfQogICAgfSkKfQoKZnNhdmUgPC0gZnVuY3Rpb24oeCwgZmlsZSA9IE5VTEwsIGxvY2F0aW9uID0gIi4vZGF0YS9wcm9jZXNzZWQvIikgewogICAgaWZlbHNlKCFkaXIuZXhpc3RzKCJkYXRhIiksIGRpci5jcmVhdGUoImRhdGEiKSwgRkFMU0UpCiAgICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEvcHJvY2Vzc2VkIiksIGRpci5jcmVhdGUoImRhdGEvcHJvY2Vzc2VkIiksIEZBTFNFKQogICAgaWYgKGlzLm51bGwoZmlsZSkpCiAgICAgICAgZmlsZSA9IGRlcGFyc2Uoc3Vic3RpdHV0ZSh4KSkKICAgIGRhdGVuYW1lIDwtIHN1YnN0cihnc3ViKCJbOi1dIiwgIiIsIFN5cy50aW1lKCkpLCAxLCA4KQogICAgdG90YWxuYW1lIDwtIHBhc3RlKGxvY2F0aW9uLCBkYXRlbmFtZSwgZmlsZSwgIi5yZGEiLCBzZXAgPSAiIikKICAgIHNhdmUoeCwgZmlsZSA9IHRvdGFsbmFtZSkgICNuZWVkIHRvIGZpeCBpZiBmaWxlIGlzIHJlbG9hZGVkIGFzIGlucHV0IG5hbWUsIG5vdCBhcyB4LiAKfQoKZmxvYWQgPC0gZnVuY3Rpb24oZmlsZW5hbWUpIHsKICAgIGxvYWQoZmlsZW5hbWUpCiAgICBnZXQobHMoKVtscygpICE9ICJmaWxlbmFtZSJdKQp9Cgpmc2hvd2RmIDwtIGZ1bmN0aW9uKHgsIC4uLikgewogICAga25pdHI6OmthYmxlKHgsIGRpZ2l0cyA9IDIsICJodG1sIiwgLi4uKSAlPiUKICAgICAgICBrYWJsZUV4dHJhOjprYWJsZV9zdHlsaW5nKGJvb3RzdHJhcF9vcHRpb25zID0gYygic3RyaXBlZCIsICJob3ZlciIpKSAlPiUKICAgICAgICBrYWJsZUV4dHJhOjpzY3JvbGxfYm94KHdpZHRoID0gIjEwMCUiLCBoZWlnaHQgPSAiMzAwcHgiKQp9Cgpjb2xvcml6ZSA8LSBmdW5jdGlvbih4LCBjb2xvcikgewogICAgc3ByaW50ZigiPHNwYW4gc3R5bGU9J2NvbG9yOiAlczsnPiVzPC9zcGFuPiIsIGNvbG9yLCB4KQp9CgpwYWNrYWdlcyA9IGMoIlJTaWVuYSIsICJkZXZ0b29scyIsICJpZ3JhcGgiKQpmcGFja2FnZS5jaGVjayhwYWNrYWdlcykKI2RldnRvb2xzOjppbnN0YWxsX2dpdGh1YignSm9jaGVtVG9sc21hL1JzaWVuYVR3b1N0ZXAnLCBidWlsZF92aWduZXR0ZXM9VFJVRSkKcGFja2FnZXMgPSBjKCJSc2llbmFUd29TdGVwIikKZnBhY2thZ2UuY2hlY2socGFja2FnZXMpCgpsaWJyYXJ5KHRpZHl2ZXJzZSkKYGBgCgpgYGB7cn0Kc2Nob2xhcnMgPC0gZmxvYWQoIi4vZGF0YS9wcm9jZXNzZWQvc2Nob2xhcnNfMjAyNDA5MjQucmRhIikKYGBgCgpgYGB7cn0KZmNvbG5ldCA8LSBmdW5jdGlvbihkYXRhID0gc2Nob2xhcnMsIHVuaXZlcnNpdHkgPSBjKCJSVSIsICJFVVIiLCAiV1VSIiwgIlV2QSIsICJMZWlkZW4iLCAiVlUiLCAiVVUiLCAiVXZUIiksIGRpc2NpcGxpbmUgPSBjKCJzb2Npb2xvZ3kiLCAicG9saXRpY2FsIHNjaWVuY2UiKSwgd2F2ZXMgPSBsaXN0KGMoMjAxNSwgMjAxOCksIGMoMjAxOSwgMjAyMykpLCB0eXBlID0gYygiZmlyc3QiKSkgewogIAogIAogICMgc3RlcCAxCiAgZGVtb2dyYXBoaWNzIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGF0YSRkZW1vZ3JhcGhpY3MpCiAgZGVtb2dyYXBoaWNzIDwtIGRlbW9ncmFwaGljcyAlPiUgbXV0YXRlKAogICAgVW5pdmVyc2l0ZWl0MS4yMiA9IHJlcGxhY2UoVW5pdmVyc2l0ZWl0MS4yMiwgaXMubmEoVW5pdmVyc2l0ZWl0MS4yMiksICIiKSwKICAgIFVuaXZlcnNpdGVpdDIuMjIgPSByZXBsYWNlKFVuaXZlcnNpdGVpdDIuMjIsIGlzLm5hKFVuaXZlcnNpdGVpdDIuMjIpLCAiIiksCiAgICBVbml2ZXJzaXRlaXQxLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQxLjI0KSwgIiIpLAogICAgVW5pdmVyc2l0ZWl0Mi4yNCA9IHJlcGxhY2UoVW5pdmVyc2l0ZWl0Mi4yNCwgaXMubmEoVW5pdmVyc2l0ZWl0Mi4yNCksICIiKSwKICAgIGRpc2NpcGxpbmUuMjIgPSByZXBsYWNlKGRpc2NpcGxpbmUuMjIsIGlzLm5hKGRpc2NpcGxpbmUuMjIpLCAiIiksCiAgICBkaXNjaXBsaW5lLjI0ID0gcmVwbGFjZShkaXNjaXBsaW5lLjI0LCBpcy5uYShkaXNjaXBsaW5lLjI0KSwgIiIpCiAgKQoKICBzYW1wbGUgPC0gd2hpY2goKGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQxLjIyICVpbiUgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQyLjIyICVpbiUgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQxLjI0ICVpbiUgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQyLjI0ICVpbiUgdW5pdmVyc2l0eSkgJiAoZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjIgJWluJSBkaXNjaXBsaW5lIHwgZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjQgJWluJSBkaXNjaXBsaW5lKSkKCiAgZGVtb2dyYXBoaWNzX3NvYyA8LSBkZW1vZ3JhcGhpY3Nbc2FtcGxlLCBdCiAgc2Nob2xhcnNfc2VsIDwtIGxhcHBseShzY2hvbGFycywgIlsiLCBzYW1wbGUpCgogICMgc3RlcCAyCiAgaWRzIDwtIGRlbW9ncmFwaGljc19zb2MkYXVfaWQKICBud2F2ZXMgPC0gbGVuZ3RoKHdhdmVzKQogIG5ldHMgPC0gYXJyYXkoMCwgZGltID0gYyhud2F2ZXMsIGxlbmd0aChpZHMpLCBsZW5ndGgoaWRzKSksIGRpbW5hbWVzID0gbGlzdCh3YXZlID0gMTpud2F2ZXMsIGlkcywgaWRzKSkKICBkaW1uYW1lcyhuZXRzKQoKICAjIHN0ZXAgMwogIGRmX3dvcmtzIDwtIHRpYmJsZSgKICAgIHdvcmtzX2lkID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRpZCkpLAogICAgd29ya3NfYXV0aG9yID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRhdXRob3IpLCByZWN1cnNpdmUgPSBGQUxTRSksCiAgICB3b3Jrc195ZWFyID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRwdWJsaWNhdGlvbl95ZWFyKSwgcmVjdXJzaXZlID0gRkFMU0UpCiAgKQoKICBkZl93b3JrcyA8LSBkZl93b3Jrc1shZHVwbGljYXRlZChkZl93b3JrcyksIF0KCiAgIyBzdGVwIDQKICBpZiAodHlwZSA9PSAiZmlyc3QiKSB7CiAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsKICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyPj13YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhcjw9d2F2ZXNbW2pdXVsyXSxdCiAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsKICAgICAgICBlZ28gPC0gZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZFsxXQogICAgICAgIGFsdGVycyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkWy0xXQogICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsKICAgICAgICAgIG5ldHNbaiwgd2hpY2goaWRzICVpbiUgZWdvKSwgd2hpY2goaWRzICVpbiUgYWx0ZXJzKV0gPC0gMQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgaWYgKHR5cGUgPT0gImxhc3QiKSB7CiAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsKICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sIF0KICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgewogICAgICAgIGVnbyA8LSByZXYoZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZClbMV0KICAgICAgICBhbHRlcnMgPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWy0xXQogICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsKICAgICAgICAgIG5ldHNbaiwgd2hpY2goaWRzICVpbiUgZWdvKSwgd2hpY2goaWRzICVpbiUgYWx0ZXJzKV0gPC0gMQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgaWYgKHR5cGUgPT0gImFsbCIpIHsKICAgIGZvciAoaiBpbiAxOm53YXZlcykgewogICAgICBkZl93b3Jrc193IDwtIGRmX3dvcmtzW2RmX3dvcmtzJHdvcmtzX3llYXIgPj0gd2F2ZXNbW2pdXVsxXSAmIGRmX3dvcmtzJHdvcmtzX3llYXIgPD0gd2F2ZXNbW2pdXVsyXSwgXQogICAgICBmb3IgKGkgaW4gMTpucm93KGRmX3dvcmtzX3cpKSB7CiAgICAgICAgZWdvcyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkCiAgICAgICAgaWYgKHN1bShpZHMgJWluJSBlZ29zKSA+IDApIHsKICAgICAgICAgIG5ldHNbaiwgd2hpY2goaWRzICVpbiUgZWdvcyksIHdoaWNoKGlkcyAlaW4lIGVnb3MpXSA8LSAxCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIG91dHB1dCA8LSBsaXN0KCkKICBvdXRwdXQkZGF0YSA8LSBzY2hvbGFyc19zZWwKICBvdXRwdXQkbmV0cyA8LSBuZXRzCiAgcmV0dXJuKG91dHB1dCkKfQpgYGAKCmBgYHtyfQp0ZXN0IDwtIGZjb2xuZXQoZGF0YSA9IHNjaG9sYXJzLCAKICAgICAgICAgICAgICAgIHVuaXZlcnNpdHkgPSBjKCJSVSIsICJFVVIiLCAiV1VSIiwgIlV2QSIsICJMZWlkZW4iLCAiVlUiLCAiVVUiLCAiVXZUIiksIAogICAgICAgICAgICAgICAgZGlzY2lwbGluZSA9IGMoInNvY2lvbG9neSIsICJwb2xpdGljYWwgc2NpZW5jZSIpLCAKICAgICAgICAgICAgICAgIHdhdmVzID0gbGlzdChjKDIwMTUsIDIwMTgpLCBjKDIwMTksIDIwMjMpKSwgCiAgICAgICAgICAgICAgICB0eXBlID0gYygiYWxsIikpCgp0ZXN0X3cyIDwtIGlncmFwaDo6Z3JhcGhfZnJvbV9hZGphY2VuY3lfbWF0cml4KAogIHRlc3QkbmV0c1syLCxdLCAjbm93LCBJIHRha2UgdGhlIHNlY29uZCB3YXZlCiAgbW9kZSA9IGMoImRpcmVjdGVkIiksCiAgd2VpZ2h0ZWQgPSBOVUxMLAogIGRpYWcgPSBGQUxTRSwKICBhZGQuY29sbmFtZXMgPSBOVUxMCikKCiNMZXQgdXMgZmluZCBlZ28gY2hhcmFjdGVyaXN0aWNzLiAKI2ZpcnN0IGZpc2ggb3V0IHRoZSBkYXRhCmRmIDwtIHRlc3QkZGF0YQoKI3NhbWUgY29tcGxpY2F0ZWQgc3RydWN0dXJlIGFzICdzY2hvbGFycycgdGh1cyBmaXJzdCBtYWtlIGEgZGF0YWZyYW1lIGZyb20gdGhlIGxpc3QgaW4gd2hpY2ggYWxsIGluZm8gd2FzIHNhdmVkLiAKZGZfZWdvIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGYkZGVtb2dyYXBoaWNzKQoKI0RPIE5PVCBNRVNTIFVQIFRIRSBPUkRFUiEgVEhVUyBJRiBZT1UgSk9JTiBUSElTIERBVEEgV0lUSCBZT1VSIE9XTiBEQVRBIENIRUNLIFRIQVQgT1JERVIgUkVNQUlORUQgVEhFIFNBTUUhISAKCiNBZGRpbmcgZ2VuZGVyCgpkZl9nZW5kZXIgPC0gZmxvYWQoIi4vZGF0YS9wcm9jZXNzZWQvZGZfZ2VuZGVyLnJkYSIpCgoKZ2VuZGVyIDwtIGRmX2dlbmRlclssIGMoIm5hbWUiLCAiZ2VuZGVyIildCgpnZW5kZXIgPC0gZ2VuZGVyICU+JQpyZW5hbWUoTmFhbSA9IG5hbWUpCgoKZGZfZWdvIDwtIGxlZnRfam9pbihkZl9lZ28sIGdlbmRlciwgYnk9Ik5hYW0iKQoKY29tcCA8LSBpZ3JhcGg6OmNvbXBvbmVudHModGVzdF93MikKZ19jb24gPC0gaW5kdWNlZF9zdWJncmFwaCh0ZXN0X3cyLCB3aGljaChjb21wJG1lbWJlcnNoaXAgPT0gd2hpY2gubWF4KGNvbXAkY3NpemUpKSkKbCA8LSBsYXlvdXRfd2l0aF9kaChnX2NvbikKCnBsb3QoZ19jb24sCiAgdmVydGV4LmNvbG9yID0gaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJSVSIsICJyZWQiLCAKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIldVUiIsICJncmVlbiIsCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJVVSIsICJ5ZWxsb3ciLAogICAgICAgICAgICAgICAgIGlmZWxzZShkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yNCA9PSAiVXZBIiwgImJsYWNrIiwKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIkxlaWRlbiIsICJibHVlIiwKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIlZVIiwgInB1cnBsZSIsCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJVdlQiLCAibGlnaHRibHVlIiwKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIkVVUiIsICJsZW1vbmNoaWZmb24iLAogICAgICAgICAgICAgICAgIGlmZWxzZShkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yNCA9PSAiUlVHIiwgImNvcmFsIiwgIndoaXRlIikpKSkpKSkpKSwKICB2ZXJ0ZXgubGFiZWwgPSBOQSwKICBlZGdlLndpZHRoID0gMC4yLAogIGVkZ2UuYXJyb3cuc2l6ZSA9MC4yLCBsYXlvdXQgPSBsKQoKbCA8LSBsYXlvdXRfd2l0aF9kaCh0ZXN0X3cyKQoKcGxvdCh0ZXN0X3cyLAogIHZlcnRleC5jb2xvciA9IGlmZWxzZShkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yNCA9PSAiUlUiLCAicmVkIiwgCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJXVVIiLCAiZ3JlZW4iLAogICAgICAgICAgICAgICAgIGlmZWxzZShkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yNCA9PSAiVVUiLCAieWVsbG93IiwKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIlV2QSIsICJibGFjayIsCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJMZWlkZW4iLCAiYmx1ZSIsCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJWVSIsICJwdXJwbGUiLAogICAgICAgICAgICAgICAgIGlmZWxzZShkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yNCA9PSAiVXZUIiwgImxpZ2h0Ymx1ZSIsCiAgICAgICAgICAgICAgICAgaWZlbHNlKGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0ID09ICJFVVIiLCAibGVtb25jaGlmZm9uIiwKICAgICAgICAgICAgICAgICBpZmVsc2UoZGZfZWdvJFVuaXZlcnNpdGVpdDEuMjQgPT0gIlJVRyIsICJjb3JhbCIsICJ3aGl0ZSIpKSkpKSkpKSksCiAgdmVydGV4LmxhYmVsID0gTkEsCiAgZWRnZS53aWR0aCA9IDAuMiwKICBlZGdlLmFycm93LnNpemUgPTAuMiwgbGF5b3V0ID0gbCkKCmBgYAoKYGBge3J9CndhdmUxIDwtIHRlc3QkbmV0c1sxLCxdCndhdmUyIDwtIHRlc3QkbmV0c1syLCxdCgpzdW0oaXMubmEod2F2ZTIpKQoKc3VtKGRpYWcod2F2ZTIpPT0wKQoKZGlhZyh3YXZlMikgPC0gMApkaWFnKHdhdmUxKSA8LSAwCgpzdW0oZGlhZyh3YXZlMik9PTApCgpzdW0oZGlhZyh3YXZlMSk9PTApCgoKc3VtKHdhdmUyPjEpCgpzdW0od2F2ZTI+MCkKCiNwdXRzIG5ldHMgaW4gYW4gYXJyYXkKbmV0X3NvY19hcnJheSA8LSBhcnJheShkYXRhID0gYyh3YXZlMSwgd2F2ZTIpLCBkaW0gPSBjKGRpbSh3YXZlMSksIDIpKQoKIyBkZXBlbmRlYm50Cm5ldCA8LSBzaWVuYURlcGVuZGVudChuZXRfc29jX2FycmF5KQoKZGYgPC0gdGVzdCRkYXRhCgpkZl9lZ28gPC0gZG8uY2FsbChyYmluZC5kYXRhLmZyYW1lLCBkZiRkZW1vZ3JhcGhpY3MpCgp1bmlxdWUoYyhkZl9lZ28kZnVuY3RpZS4yMiwgZGZfZWdvJEZ1bmN0aWUuMjQpKQoKZGZfZWdvJEZ1bmN0aWUuMjJbaXMubmEoZGZfZWdvJEZ1bmN0aWUuMjIpXSA8LSAiIgpkZl9lZ28kRnVuY3RpZS4yNFtpcy5uYShkZl9lZ28kRnVuY3RpZS4yNCldIDwtICIiCgoKZGZfZWdvJGZ1bmN0aWUgPC0gaWZlbHNlKGRmX2VnbyRGdW5jdGllLjIyPT0iSG9vZ2xlcmFhciIsIDEsIDApCmRmX2VnbyRmdW5jdGllIDwtIGlmZWxzZShkZl9lZ28kRnVuY3RpZS4yND09Ikhvb2dsZXJhYXIiLCAxLCAwKQpkZl9lZ28kZnVuY3RpZSA8LSBpZmVsc2UoZGZfZWdvJEZ1bmN0aWUuMjI9PSJCaWp6b25kZXIgaG9vZ2xlcmFhciIsIDEsIGRmX2VnbyRmdW5jdGllKQpkZl9lZ28kZnVuY3RpZSA8LSBpZmVsc2UoZGZfZWdvJEZ1bmN0aWUuMjQ9PSJCaWp6b25kZXIgaG9vZ2xlcmFhciIsIDEsIGRmX2VnbyRmdW5jdGllKQoKZGYgPC0gdGVzdCRkYXRhCgoKdGFibGUoZGZfZWdvJGZ1bmN0aWUsIHVzZU5BPSJhbHdheXMiKQpmdW5jdGllIDwtIGNvQ292YXIoZGZfZWdvJGZ1bmN0aWUpCgpkZl9lZ28kdW5pXzIyX251bSA8LSBhcy5udW1lcmljKGZhY3RvcigKICBkZl9lZ28kVW5pdmVyc2l0ZWl0MS4yMiwKICBsZXZlbHMgPSBjKCJSVSIsICJFVVIiLCAiV1VSIiwgIlV2QSIsICJMZWlkZW4iLCAiVlUiLCAiVVUiLCAiVXZUIikKKSkKCmRmX2VnbyR1bmlfMjRfbnVtIDwtIGFzLm51bWVyaWMoZmFjdG9yKAogIGRmX2VnbyRVbml2ZXJzaXRlaXQxLjI0LAogIGxldmVscyA9IGMoIlJVIiwgIkVVUiIsICJXVVIiLCAiVXZBIiwgIkxlaWRlbiIsICJWVSIsICJVVSIsICJVdlQiKQopKQpkZl9lZ28kdW5pXzIyX251bT09ZGZfZWdvJHVuaV8yNF9udW0KCnRhYmxlKGRmX2VnbyR1bmlfMjRfbnVtLCB1c2VOQT0iYWx3YXlzIikKdW5pXzI0IDwtIGNvQ292YXIoZGZfZWdvJHVuaV8yNF9udW0pCgpteWRhdGEgPC0gc2llbmFEYXRhQ3JlYXRlKG5ldCwgZnVuY3RpZSwgdW5pXzI0KQpgYGAKCmBgYHtyLCBldmFsPSBGQUxTRX0KIyBXZXJrdCBub2cgbmlldCB6b25kZXIgZ2VuZGVyIHZhbiBqYWFyIGVydm9vcgoKZGZfZWdvIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGYkZGVtb2dyYXBoaWNzKQoKI0RPIE5PVCBNRVNTIFVQIFRIRSBPUkRFUiEgVEhVUyBJRiBZT1UgSk9JTiBUSElTIERBVEEgV0lUSCBZT1VSIE9XTiBEQVRBIENIRUNLIFRIQVQgT1JERVIgUkVNQUlORUQgVEhFIFNBTUUhISAKCiNBZGRpbmcgZ2VuZGVyCgpkZl9nZW5kZXIgPC0gZmxvYWQoIi4vZGF0YS9wcm9jZXNzZWQvZGZfZ2VuZGVyLnJkYSIpCgoKZ2VuZGVyIDwtIGRmX2dlbmRlclssIGMoIm5hbWUiLCAiZ2VuZGVyIildCgpnZW5kZXIgPC0gZ2VuZGVyICU+JQpyZW5hbWUoTmFhbSA9IG5hbWUpCgoKZGZfZWdvIDwtIGxlZnRfam9pbihkZl9lZ28sIGdlbmRlciwgYnk9Ik5hYW0iKQoKCmRmX2VnbyRnZW5kZXIgPC0gaWZlbHNlKGRmX2VnbyRnZW5kZXI9PSJmZW1hbGUiLCAxLCAwKQojRmVtYWxlID0gMSwgbWFsZSA9IDAKCmRmX2VnbyRnZW5kZXIKIyBnZW5kZXIKdGFibGUoZGZfZWdvJGdlbmRlciwgdXNlTkE9ImFsd2F5cyIpCiN2X2dlbmRlciA8LSBjb0NvdmFyKGRmX2VnbyRnZW5kZXIpCgp2X2dlbmRlciA8LSBjb0NvdmFyKGRmX2VnbyRnZW5kZXIsIG5vZGVTZXQgPSBhdHRyKG5ldCwgIm5vZGVTZXQiKSkKCnN0cih2X2dlbmRlcikKc3RyKG5ldCkKCmF0dHIobmV0LCAibm9kZVNldCIpCmF0dHIodl9nZW5kZXIsICJub2RlU2V0IikKbGVuZ3RoKGRmX2VnbyRnZW5kZXIpCmRpbShuZXQpCgpzdHIobmV0KQphdHRyaWJ1dGVzKG5ldCkKCgoKYGBgCgojIFN0ZXAgMgoKYGBge3J9Cm15ZWZmIDwtIGdldEVmZmVjdHMobXlkYXRhKQoKbXllZmYKCgoKYGBgCgojIFN0ZXAgMzoKCmBgYHtyfQppZiAoIWRpci5leGlzdHMoInJlc3VsdHMiKSkgZGlyLmNyZWF0ZSgicmVzdWx0cyIpCgpwcmludDAxUmVwb3J0KG15ZGF0YSwgbW9kZWxuYW1lID0gIi4vcmVzdWx0cy9yX3c2IikKYGBgCgojIFN0ZXAgNAoKYGBge3IsIGV2YWw9IEZBTFNFfQpzZXQuc2VlZCg0MikKCgojbXlBbGdvcml0aG0gPC0gc2llbmFBbGdvcml0aG1DcmVhdGUocHJvam5hbWUgPSAicl93NiIpCiNhbnNNMSA8LSBzaWVuYTA3KG15QWxnb3JpdGhtLCBkYXRhID0gbXlkYXRhLCBlZmZlY3RzID0gbXllZmYsIHJldHVybkRlcHMgPSBUUlVFKQojIGlmIG5lY2Vzc2FyeSBlc3RpbWF0ZSBhZ2FpbiEgIGFuc00xIDwtIHNpZW5hMDcobXlBbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZiwKIyBwcmV2QW5zID0gYW5zTTEsIHJldHVybkRlcHM9VFJVRSkKYW5zTTEKCm15ZWZmIDwtIGdldEVmZmVjdHMobXlkYXRhKQoKI215ZWZmIDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmLCBpc29sYXRlTmV0LCBpblBvcCwgb3V0QWN0KSAgI3dlIGtub3cgdGhhdCBxdWl0ZSBhIGxvdCBvZiBzdGFmZiBoYXMgbm90IHB1Ymxpc2hlZCB3aXRoIHNvbWVvbmUgZWxzZQpteWVmZiA8LSBpbmNsdWRlRWZmZWN0cyhteWVmZiwgaW5Qb3AsIG91dEFjdCwgZWdvWCkKCgpteWVmZiA8LSBzZXRFZmZlY3QobXllZmYsIHNhbWVYLCBpbnRlcmFjdGlvbjEgPSAidW5pXzI0IikKbXllZmYgPC0gc2V0RWZmZWN0KG15ZWZmLCBlZ29YLCBpbnRlcmFjdGlvbjEgPSAiZnVuY3RpZSIpCgoKCm15QWxnb3JpdGhtIDwtIHNpZW5hQWxnb3JpdGhtQ3JlYXRlKHByb2puYW1lID0gInNvY19pbml0IiwgbjMgPSAyMDApCmFuc00xIDwtIHNpZW5hMDcobXlBbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZiwgcmV0dXJuRGVwcyA9IFRSVUUpCiMgaWYgbmVjZXNzYXJ5IGVzdGltYXRlIGFnYWluISAgYW5zTTEgPC0gc2llbmEwNyhteUFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmLAojIHByZXZBbnMgPSBhbnNNMSwgcmV0dXJuRGVwcz1UUlVFKQphbnNNMQoKCgpwYXJhbGxlbDo6ZGV0ZWN0Q29yZXMoKQoKYGBgCgpgYGB7ciwgZXZhbD1GQUxTRX0KCmxpYnJhcnkoUlNpZW5hKQoKP3NpZW5hRGVwZW5kZW50CgpteW5ldDEgPC0gc2llbmFEZXBlbmRlbnQoYXJyYXkoYyhzNTAxLCBzNTAyLCBzNTAzKSwgZGltPWMoNTAsIDUwLCAzKSkpCm15YmVoIDwtIHNpZW5hRGVwZW5kZW50KHM1MGEsIHR5cGU9ImJlaGF2aW9yIikKCgpzbW9rZSA8LSBzNTBzCgpzbW9rZSA8LSB2YXJDb3ZhcihzNTBzKQoKbXlkYXRhIDwtIHNpZW5hRGF0YUNyZWF0ZShteW5ldDEsIG15YmVoLCBzbW9rZSkKCnByaW50MDFSZXBvcnQobXlkYXRhKQoKbXlkYXRhCgpteWVmZiA8LWdldEVmZmVjdHMobXlkYXRhKQoKbXllZmYgPC0gaW5jbHVkZUVmZmVjdHMgKG15ZWZmLCB1bmVxdWFsWCwgbmFtZT0ibXluZXQxIiwgaW50ZXJhY3Rpb24xPSJzbW9rZSIpCgpteWVmZiA8LSBpbmNsdWRlRWZmZWN0cyAobXllZmYsIHVuZXF1YWxYLCBuYW1lPSJteW5ldDEiLCBpbnRlcmFjdGlvbjE9Im15YmVoIikKCm15QWxnb3JpdGhtIDwtIHNpZW5hQWxnb3JpdGhtQ3JlYXRlKCkKYW5zTTEgPC0gc2llbmEwNyhteUFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmLCBwcmV2QW5zPWFuc00xKQphbnNNMQoKCgoKCgpgYGAKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKIyBOb3RlcwoKW0Bib3plbWFuMjAxMV0KCltAa3JldHNjaG1lcjIwMThdCgpCcmlkZ2luZyB0aWVzIGFjcm9zcyBjbHVzdGVycyBpcyB1c2VmdWwgZm9yIGtub3dsZWRnZSBwcm9kdWN0aW9uLiBJdCBmb2xsb3dzIHRoYXQgdGhvc2Ugd2hvIGJyaWRnZSB0aGUgZ2FwcyBieSBjb2xsYWJvcmF0aW5nIHdpdGggc2Nob2xhcnMgZnJvbSBkaWZmZXJlbnQgdW5pdmVyc2l0aWVzIHdvdWxkIGJlIGJlbmVmaWNpYWwuIFRoZXJlIGFyZSByZWFzb25zIHRvIGV4cGVjdCBnZW5kZXIgZGlmZmVyZW5jZXMgaW4gdGhpcyByZWdhcmQgW0BrcmV0c2NobWVyMjAxOCBAYm96ZW1hbjIwMTFdLiBUaHVzIHJlc2VhcmNoIHF1ZXN0aW9uczoKCjE6IElzIGEgaGlnaGVyIGFtb3VudCBvZiBpbnRlcnVuaXZlcnNpdHkgdGllcyBsaW5rZWQgdG8gYSBoaWdoZXIgYmV0d2Vlbm5lcyBjZW50cmFsaXR5PwoKMjogRG8gbWVuIG1vcmUgb2Z0ZW4gY2hvb3NlIHRvIGNvbGxhYm9yYXRlIHdpdGggc2Nob2xhcnMgb3V0c2lkZSBvZiB0aGVpciB1bml2ZXJzaXR5IHRoYW4gd29tZW4/Cg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Week6.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
